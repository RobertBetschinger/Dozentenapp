<html>
	<head>
	
		<meta charset="utf-8">
		<title>Bestehende Fragen</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>      
        <script type="text/javascript" charset="utf-8">

			document.addEventListener("deviceready", onDeviceReady, true);
		
             function onLoad()
             {
                  document.addEventListener("deviceready", onDeviceReady, true);
             }

             function onDeviceReady()
             {
                  // navigator.notification.alert("PhoneGap is working");
				  document.addEventListener("offline", onOffline, false);
				  document.addEventListener("online", onOnline, false);
             }
			 function callMainMenu()
             {
                window.location = "index.html";
             }
			 
			 function callEditQuestionPage(cID, qID)
             {
				localStorage.category = cID;
				localStorage.question = qID;
                window.location = "edit_existing_question.html";
             }
			 
			 function onOffline() {
				alert("Keine Internetverbindung! App nur eingeschränkt verwendungsfähig.");
			}
			
			function onOnline() {
				alert("Internetverbindung wieder vorhanden.");
			}

        </script>
		
		<!--
		icon authors:
		arrow_down: Icons made by "https://www.flaticon.com/authors/dave-gandy" Dave Gandy from "https://www.flaticon.com/" www.flaticon.com is licensed by "http://creativecommons.org/licenses/by/3.0/" CC 3.0
		arrow_right: Icons made by "https://www.flaticon.com/authors/dave-gandy" Dave Gandy from "https://www.flaticon.com/" www.flaticon.com is licensed by "http://creativecommons.org/licenses/by/3.0/" CC 3.0
		cancel: Icons made by "https://www.flaticon.com/authors/google" Google from "https://www.flaticon.com/" www.flaticon.com is licensed by "http://creativecommons.org/licenses/by/3.0/" CC 3.0
		edit: Icons made by "https://www.flaticon.com/authors/chanut" Chanut from "https://www.flaticon.com/" www.flaticon.com is licensed by "http://creativecommons.org/licenses/by/3.0/" CC 3.0 BY
		-->
	
	</head>
	
	<body>
	
		<div id="nav_bar">
			<button id="nav_back_button" type="button" onclick="callMainMenu()"><img id="arrow_back" src="images/arrow_left_black.svg" alt="Back"></button>
		</div>
	
		<div id="content_existingQuestions">
		
		<h1>Existierende Fragen:</h1>
		
		<p>Hier können Sie bestehende Fragen einsehen.</p>
		
		<div id="category_1" class="div_category">
			<button id="button_c1" class="category_button" type="button" onclick="buttonC1click()"><img id="arrow_C1" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C1" ></p>
		</div>

		<div id="category_2">
			<button id="button_c2" class="category_button" type="button" onclick="buttonC2click()"><img id="arrow_C2" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C2"></p>
		</div>
		
		<div id="category_3">
			<button id="button_c3" class="category_button" type="button" onclick="buttonC3click()"><img id="arrow_C3" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C3"></p>
		</div>
		
		<div id="category_4">
			<button id="button_c4" class="category_button" type="button" onclick="buttonC4click()"><img id="arrow_C4" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C4"></p>
		</div>
		
		<div id="category_5">
			<button id="button_c5" class="category_button" type="button" onclick="buttonC5click()"><img id="arrow_C5" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C5"></p>
		</div>
		
		<div id="category_6">
			<button id="button_c6" class="category_button" type="button" onclick="buttonC6click()"><img id="arrow_C6" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C6"></p>
		</div>
		
		<div id="category_7">
			<button id="button_c7" class="category_button" type="button" onclick="buttonC7click()"><img id="arrow_C7" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C7"></p>
		</div>
		
		<div id="category_8">
			<button id="button_c8" class="category_button" type="button" onclick="buttonC8click()"><img id="arrow_C8" class="arrow_down" src="images/arrow_down_black.svg" alt="unfold"><span></span></button>
			<p class="p_existing_questions" id="content_C8"></p>
		</div>
		
		
					
		<script type="text/javascript">
		
			var buttonC1clicked = false;
			var buttonC2clicked = false;
			var buttonC3clicked = false;
			var buttonC4clicked = false;
			var buttonC5clicked = false;
			var buttonC6clicked = false;
			var buttonC7clicked = false;
			var buttonC8clicked = false;
			
			$(document).ready(function(){
				
				$.getJSON("http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php", function( data ) {
				
					var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
				
					$('#category_1 > button > span').text(json.categories[0].category_name);
					
					$('#category_2 > button > span').text(json.categories[1].category_name);
					
					$('#category_3 > button > span').text(json.categories[2].category_name);
					
					$('#category_4 > button > span').text(json.categories[3].category_name);
					
					$('#category_5 > button > span').text(json.categories[4].category_name);
					
					$('#category_6 > button > span').text(json.categories[5].category_name);
					
					$('#category_7 > button > span').text(json.categories[6].category_name);
					
					$('#category_8 > button > span').text(json.categories[7].category_name);
				
				});
			
			})
		
			function buttonC1click(){
				if(buttonC1clicked == false){
					button_c1.style.background = "#aea700";
					document.getElementById("arrow_C1").src = "images/arrow_right_black.svg";
					buttonC1clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[0].questions, function(i, f) {
							  var toAdd = "<br>" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br>" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br>" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br>" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br>" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br>"
							   $(toAdd).appendTo("#category_1 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 1)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_1 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(1, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_1 p");
						  });

						});

					});
					
				} else {
					button_c1.style.background = "#bdc3c7";
					document.getElementById("arrow_C1").src = "images/arrow_down_black.svg";
					buttonC1clicked = false;
					document.getElementById("content_C1").innerHTML = "";
					document.getElementById("div_delete_C1").innerHTML = "";
				}
			}
			
			function buttonC2click(){
				if(buttonC2clicked == false){
					button_c2.style.background = "#aea700";
					document.getElementById("arrow_C2").src = "images/arrow_right_black.svg";
					buttonC2clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[1].questions, function(i, f) {
							  var toAdd = "<br>" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br>" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br>" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br>" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br>" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br>"
							   $(toAdd).appendTo("#category_2 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 2)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_2 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(2, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_2 p");
						  });

						});

					});
				} else {
					button_c2.style.background = "#bdc3c7";
					document.getElementById("arrow_C2").src = "images/arrow_down_black.svg";
					buttonC2clicked = false;
					document.getElementById("content_C2").innerHTML = "";
				}
			}
			
			function buttonC3click(){
				if(buttonC3clicked == false){
					button_c3.style.background = "#aea700";
					document.getElementById("arrow_C3").src = "images/arrow_right_black.svg";
					buttonC3clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[2].questions, function(i, f) {
							  var toAdd = "<br>" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br>" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br>" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br>" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br>" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br>"
							   $(toAdd).appendTo("#category_3 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 3)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_3 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(3, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_3 p");
						 });

						});

					});
				} else {
					button_c3.style.background = "#bdc3c7";
					document.getElementById("arrow_C3").src = "images/arrow_down_black.svg";
					buttonC3clicked = false;
					document.getElementById("content_C3").innerHTML = "";
				}
			}
			
			function buttonC4click(){
				if(buttonC4clicked == false){
					button_c4.style.background = "#aea700";
					document.getElementById("arrow_C4").src = "images/arrow_right_black.svg";
					buttonC4clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[3].questions, function(i, f) {
							  var toAdd = "<br>" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br>" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br>" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br>" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br>" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br>"
							   $(toAdd).appendTo("#category_4 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 4)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_4 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(4, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_4 p");
						  });

						});

					});
				} else {
					button_c4.style.background = "#bdc3c7";
					document.getElementById("arrow_C4").src = "images/arrow_down_black.svg";
					buttonC4clicked = false;
					document.getElementById("content_C4").innerHTML = "";
				}
			}
			
			function buttonC5click(){
				if(buttonC5clicked == false){
					button_c5.style.background = "#aea700";
					document.getElementById("arrow_C5").src = "images/arrow_right_black.svg";
					buttonC5clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[4].questions, function(i, f) {
							  var toAdd = "<br />" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br />" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br />" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br />" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br />" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br />";
							   $(toAdd).appendTo("#category_5 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 5)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_5 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(5, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_5 p");
						 });

						});

					});
				} else {
					button_c5.style.background = "#bdc3c7";
					document.getElementById("arrow_C5").src = "images/arrow_down_black.svg";
					buttonC5clicked = false;
					document.getElementById("content_C5").innerHTML = "";
				}
			}
			
			function buttonC6click(){
				if(buttonC6clicked == false){
					button_c6.style.background = "#aea700";
					document.getElementById("arrow_C6").src = "images/arrow_right_black.svg";
					buttonC6clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[5].questions, function(i, f) {
							   var toAdd = "<br />" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br />" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br />" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br />" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br />" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br />";
							   $(toAdd).appendTo("#category_6 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 6)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_6 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(6, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_6 p");
						  });

						});

					});
				} else {
					button_c6.style.background = "#bdc3c7";
					document.getElementById("arrow_C6").src = "images/arrow_down_black.svg";
					buttonC6clicked = false;
					document.getElementById("content_C6").innerHTML = "";
				}
			}
			
			function buttonC7click(){
				if(buttonC7clicked == false){
					button_c7.style.background = "#aea700";
					document.getElementById("arrow_C7").src = "images/arrow_right_black.svg";
					buttonC7clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[6].questions, function(i, f) {
							   var toAdd = "<br />" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br />" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br />" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br />" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br />" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br />";
							   $(toAdd).appendTo("#category_7 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 7)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_7 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(7, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_7 p");
						  });

						});

					});
				} else {
					button_c7.style.background = "#bdc3c7";
					document.getElementById("arrow_C7").src = "images/arrow_down_black.svg";
					buttonC7clicked = false;
					document.getElementById("content_C7").innerHTML = "";
				}
			}
			
			function buttonC8click(){
				if(buttonC8clicked == false){
					button_c8.style.background = "#aea700";
					document.getElementById("arrow_C8").src = "images/arrow_right_black.svg";
					buttonC8clicked = true;
					$(function() {

						$.getJSON('http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php', function(data) {
							var json = JSON.parse(data.JSON_from_Server[0].JSON_File);
						   $.each(json.categories[7].questions, function(i, f) {
							   var toAdd = "<br />" + "<b>" + "Frage: " + "</b>" + "<br />" + f.q + "<br />" + "<b>" + 
							   "Antwort: " + "</b>" + "<br />" + f.ca + "<br />" + "<b>" + "Falsche erste Antwort: " + "</b>" + "<br />" + f.wa01 + "<br />" + "<b>" + "Falsche zweite Antwort: " + "</b>" + "<br />" + f.wa02 + "<br />" 
							   + "<b>" + "Falsche dritte Antwort: " + "</b>" + "<br />" + f.wa03 + "<br />";
							   $(toAdd).appendTo("#category_8 p");
							   $('<button id="' + i + '" ' + 'class="deleteButton" type="button" onclick="deleteButtonClick(this.id, 8)">' + '<img class="deleteIMG" src="images/cancel_red.svg" alt="delete">' + '</button>').appendTo("#category_8 p");
							   $('<button id="' + i + '" ' + 'class="editButton" type="button" onclick="callEditQuestionPage(8, this.id)">' + '<img class="editIMG" src="images/edit_black.svg" alt="edit">' + '</button>').appendTo("#category_8 p");
						  });

						});

					});
				} else {
					button_c8.style.background = "#bdc3c7";
					document.getElementById("arrow_C8").src = "images/arrow_down_black.svg";
					buttonC8clicked = false;
					document.getElementById("content_C8").innerHTML = "";
				}
			}
		
		</script>
		
		
		<script type="text/javascript">
			<!-- script für Löschung von Fragen -->
			function deleteButtonClick(clicked_id, categoryID){				
				
				var section = "";
				
				if(categoryID == 1){
					section = "content_C1";
				}
				if(categoryID == 2){
					section = "content_C2";
				}
				if(categoryID == 3){
					section = "content_C3";
				}
				if(categoryID == 4){
					section = "content_C4";
				}
				if(categoryID == 5){
					section = "content_C5";
				}
				if(categoryID == 6){
					section = "content_C6";
				}
				if(categoryID == 7){
					section = "content_C7";
				}
				if(categoryID == 8){
					section = "content_C8";
				}
				
				var jsonIssues = {};
	
				$.ajax({
					url: "http://pcrw00023.uni-regensburg.de:10080/php/get_json_from_db.php",
					async: false,
					dataType: 'json',
					success: function(data) {
						jsonIssues = data;
					}
				});
			
				var myJSON = JSON.parse(jsonIssues.JSON_from_Server[0].JSON_File);
				
				myJSON.categories[categoryID - 1].questions.splice(clicked_id, 1);
				
				myJSON = JSON.stringify(myJSON);
				
				$.ajax({
					type: "POST",
					dataType: "json",
					url: "http://pcrw00023.uni-regensburg.de:10080/php/save_json_in_db.php",
					data: {Input_data:myJSON},
					success: function(data){
						document.getElementById(section).innerHTML = "<b>" + "<font color='green'>" + "Frage gelöscht!" + "</font>" + "</b>" + "<br/>";
					},
					error: function(e){
						console.log(e.message);
					}
				});
				
			}
		</script>
		
		</div>
	
	</body>
</html>